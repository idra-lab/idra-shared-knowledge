<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="prev" title="Demos" href="00_index.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.04.27 -->
        <title>Teleoperated Ultrasonography Setup and Demo Guide - IDRA laboratory - Open Knowledge documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=437aa6ec" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">IDRA laboratory - Open Knowledge  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">IDRA laboratory - Open Knowledge  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../01_ros_2/00_index.html">ROS2 Notes</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of ROS2 Notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_ros_2/01_CLI/00_index.html">CLI Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_ros_2/02_Packages/00_index.html">Workspaces and Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_ros_2/10_Simulation/00_index.html">Simulation Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_ros_2/30_gazebo/00_index.html">Gazebo Simulator</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02_linux/00_index.html">Linux and other Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Linux and other Utilities</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/02_docker/00_index.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/03_github_actions/00_index.html">Github Actions for CI/CD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/10_coppelia/00_index.html">Coppelia Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/04_ssh/00_index.html">Fast ssh configuration for GitHub in Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/05_cuda/00_index.html">Nvidia Driver + Cuda Toolkit Installation guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/05_cuda/00_index.html#install-nvidia-drivers-in-ubuntu">Install Nvidia Drivers in Ubuntu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_linux/05_cuda/00_index.html#install-the-nvidia-cuda-toolkit">Install the Nvidia Cuda Toolkit</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="00_index.html">Demos</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Demos</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Teleoperated Ultrasonography Setup and Demo Guide</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="teleoperated-ultrasonography-setup-and-demo-guide">
<h1>Teleoperated Ultrasonography Setup and Demo Guide<a class="headerlink" href="#teleoperated-ultrasonography-setup-and-demo-guide" title="Link to this heading">¬∂</a></h1>
<p>This is the IDRA guide to replicate the Teleoperated Ultrasonography.</p>
<section id="required-hardware">
<h2>Required Hardware<a class="headerlink" href="#required-hardware" title="Link to this heading">¬∂</a></h2>
<ul class="simple">
<li><p>Robotic arm (currently supported: UR3e);</p></li>
<li><p>Haptic Device (current supported: Haption Desktop 6D);</p></li>
<li><p>Computer with Ubuntu 22.04 and ROS2 to control the arm;</p></li>
<li><p>F\T Sensor (current supported: Bota SensONE);</p></li>
<li><p>Ultrasound probe;</p></li>
<li><p>Ethernet router with at least 4 ports;</p></li>
</ul>
<section id="optional">
<h3>Optional<a class="headerlink" href="#optional" title="Link to this heading">¬∂</a></h3>
<ul class="simple">
<li><p>Android phone for ultrasound feedback;</p></li>
<li><p>VR Headset (current supported: Meta Quest);</p></li>
<li><p>Computer with Windows and Unity to run the VR envirnonment;</p></li>
<li><p>RGBD Camera (current supported: RealSense D435);</p></li>
</ul>
</section>
</section>
<section id="connections">
<h2>Connections<a class="headerlink" href="#connections" title="Link to this heading">¬∂</a></h2>
<ul class="simple">
<li><p>The Haption haptic device (192.168.100.53) is connected through Ethernet with the Ubuntu computer (192.168.100.50).</p></li>
<li><p>The other devices (robotic arm, F\T sensor, Ubuntu computer, Windows computer if VR) are connected with the Ethernet router;</p></li>
<li><p>Android phone connected with USB;</p></li>
<li><p>RGBD Camera connected with USB;</p></li>
</ul>
</section>
<section id="required-software-and-dependencies">
<h2>Required Software and Dependencies<a class="headerlink" href="#required-software-and-dependencies" title="Link to this heading">¬∂</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/UniversalRobots/Universal_Robots_ROS2_Driver">ROS 2 UR Driver</a></p></li>
<li><p><a class="reference external" href="https://github.com/fzi-forschungszentrum-informatik/cartesian_controllers/tree/ros2">ROS 2 Cartesian impedance controller</a>;</p></li>
<li><p><a class="reference external" href="https://github.com/idra-lab/bota_ft_sensor_driver">Bota F/T Sensor Drivers</a>;</p></li>
<li><p><a class="reference external" href="https://github.com/idra-lab/haptic_interface_ROS2">ROS 2 Haption Drivers</a>;</p></li>
</ul>
</section>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Link to this heading">¬∂</a></h2>
<!-- Davide's part to be checked and reorganized -->
<section id="desktop-pc-robot-connection">
<h3>Desktop pc - Robot connection<a class="headerlink" href="#desktop-pc-robot-connection" title="Link to this heading">¬∂</a></h3>
<ol class="arabic">
<li><p>Connect the UR3e and the Bota F/T sensor to the router via ethernet (bota‚Äôs cable must be alimented)</p></li>
<li><p>Connect the pc to the router via ethernet</p></li>
<li><p>Set the ip of the desktop for the router‚Äôs network to 192.168.1.100 (also check that
the UR3e has 192.168.1.102) as described <a class="reference external" href="https://github.com/UniversalRobots/Universal_Robots_ROS2_Driver/blob/60f26aaea80e43254080d39a27d7a2ae5e5458e8/ur_robot_driver/doc/installation/robot_setup.rst">here</a>. You can test the connection with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ping</span> <span class="mf">192.168.1.102</span>
</pre></div>
</div>
</li>
<li><p>Boot the robot and set it to ‚ÄúRemote control‚Äù if it is in ‚ÄúLocal control‚Äù</p></li>
<li><p>Sourcinig ros workspaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/</span><span class="n">ur3_ros2</span><span class="o">/</span><span class="n">ur_ws</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span> <span class="c1"># (or setup.zsh)</span>
<span class="n">source</span> <span class="o">~/</span><span class="n">ur3_ros2</span><span class="o">/</span><span class="n">bota_ws</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span> <span class="c1"># (or setup.zsh)</span>
<span class="n">source</span> <span class="o">~/</span><span class="n">ur3_ros2</span><span class="o">/</span><span class="n">controller_ws</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
</pre></div>
</div>
</li>
<li><p>Test Drivers:
Launch bota sensor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">launch</span> <span class="n">rokubimini_ethercat</span> <span class="n">rokubimini_ethercat</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Launch robot driver</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">launch</span> <span class="n">ur_robot_driver</span> <span class="n">ur_control</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span> <span class="n">robot_ip</span><span class="o">:=</span><span class="mf">192.168.1.102</span> <span class="n">ur_type</span><span class="o">:=</span><span class="n">ur3e</span>
</pre></div>
</div>
<p>You should be able to move the robot to</p>
</li>
</ol>
</section>
<section id="desktop-pc-haptic-inteface">
<h3>Desktop pc - Haptic inteface<a class="headerlink" href="#desktop-pc-haptic-inteface" title="Link to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>Connect the haptic interface directly on the ethernet port of the desktop pc.</p></li>
<li><p>Set the desktop‚Äôs ip of that connection to 192.168.100.53 (you can ping also this time to test connection)</p></li>
<li><p>IMPORTANT: the haptic device must be manually calibrated every time you boot it. You have to:</p></li>
</ol>
<ul>
<li><p>Make sure the green power button is unpressed</p></li>
<li><p>Source haption workspace</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/</span><span class="n">haption_ws</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">bash</span>
</pre></div>
</div>
</li>
<li><p>In one terminal launch the haptic node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">haption_ws</span>
<span class="o">.</span> <span class="n">entrypoint</span><span class="o">.</span><span class="n">sh</span>
<span class="o">.</span> <span class="n">start_RaptorApiWrapper</span><span class="o">..</span><span class="n">something</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p>In another terminal</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span> <span class="n">start_TestCalibration</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>It will ask you to push the green button to power the haptic interface.
If the operation succeded you can kill both nodes.</p>
</li>
</ul>
<!-- ### Desktop pc - Realsense connection
1. Connect the realsense through the usb-c cable to the pc -->
</section>
<section id="android-phone">
<h3>Android phone<a class="headerlink" href="#android-phone" title="Link to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>I don‚Äôt remember the name of the app (I changed phone) but if you search the probe name
you should find it easily, it was something like ‚Äúwireless ecg‚Äù maybe. Download it.</p></li>
<li><p>Turn on the probe keeping pressed the center blue button</p></li>
<li><p>Connect to the wifi of the probe (password of the wifi probe is written in the label behind it I think you have to write it lowercase)</p></li>
<li><p>Enable debug USB on that phone (this is necessary for streaming the app view to Unity)</p>
<ul class="simple">
<li><p>To do it enable developer settings (depends on every smartphone model but it is just a matter
of pressing many times the kernel type on the settings (you can look online))</p></li>
<li><p>When developer settings are enabled, go in Settings-&gt;Developer Settings and enable Debug USB</p></li>
</ul>
</li>
<li><p>Finally connect the phone to the pc with usb cable. Keep it unlocked to avoid streaming interruption.</p></li>
</ol>
</section>
<section id="desktop-pc-launch-the-demo">
<h3>Desktop pc: Launch the demo<a class="headerlink" href="#desktop-pc-launch-the-demo" title="Link to this heading">¬∂</a></h3>
<ol class="arabic">
<li><p>In a terminal where the <code class="docutils literal notranslate"><span class="pre">ur_ws</span></code> and <code class="docutils literal notranslate"><span class="pre">bota_ws</span></code> workspaces are sourced run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/</span><span class="n">ur3_ws</span><span class="o">/</span><span class="n">nardi_ws</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Launch the complete environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">launch</span> <span class="n">motion_planner</span> <span class="n">full_env</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This will load:</p>
<ul class="simple">
<li><p>robot driver</p></li>
<li><p>bota driver</p></li>
<li><p>realsense_node</p></li>
<li><p>point cloud filter node</p></li>
<li><p>android screen broadcasting</p></li>
</ul>
</li>
</ol>
</section>
<section id="desktop-pc-stream-the-topics-to-unity">
<h3>Desktop pc: stream the topics to Unity<a class="headerlink" href="#desktop-pc-stream-the-topics-to-unity" title="Link to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>I create an apposite script which should be located in the <code class="docutils literal notranslate"><span class="pre">haption_ws</span></code> workspace.
It had a name like ‚Äútcp_endpoint.sh‚Äù. You have to run it in one terminal.</p></li>
</ol>
</section>
<section id="laptop-pc">
<h3>Laptop pc:<a class="headerlink" href="#laptop-pc" title="Link to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>Connect the pc via ethernet to the router. You should modify your ip to be under the same net
of the desktop pc. There should be a txt file called ‚Äúip_tables.txt‚Äù on the Desktop that tells you the correct one. You can try pinging desktop pc and viceversa to check if the ip is a correct one.</p></li>
<li><p>Launch UnityHub. Select the last project and open it.
It will run Unity with the hospital scene.</p></li>
<li><p>On top in Robotics -&gt; ROS Settings check that the ros host ip is the one of the desktop pc. This enables the topic communication.</p></li>
<li><p>WORTH Checking: It might be that I correctly create a scene for the health lab. Check if there is: ‚ÄúUR3eSCENE_health_room.unity‚Äù in the assets. Doubleclick to open. It should be missing of some last improvements like hand tracking but it can save you some work. Otherwise do point 5.</p></li>
<li><p>You should adjust the pointcloud streaming position with respect to the real body model since Luigi wants to change environment ü§Ø. Probably the bed has a different height wrt to the lab‚Äôs table so you should also increase Z axis of the bed and rotation of the camera. My suggestion to do this is:</p>
<ul class="simple">
<li><p>EASY: I can do it remotely with AnyDesk or TeamView</p></li>
<li><p>MEDIUM(DIY): Select the PCStreaming object in the left panel and in the right-side inspector  and set the position from there. You should enter play mode to check the effectively current position of the streamed pointcloud. You can make the process faster adjusting the position in play mode, copying the transform, stop play mode and pasting the transform. To copy the position go in the right-side inspector-&gt;Transform press the 3 little dots and do Copy-&gt; Position(World)</p></li>
</ul>
</li>
</ol>
</section>
<section id="vr-headset">
<h3>VR Headset:<a class="headerlink" href="#vr-headset" title="Link to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>Boot it up keeping pressed lateral button.</p></li>
<li><p>Connect it to the pc through usb-c cable (my white long cable should be there), you should see a request in the vr for allowing data exchange</p></li>
<li><p>You should enter the Air Link room, better if I explain it to you in call.</p></li>
</ol>
</section>
<section id="laptop-pc-test-application">
<h3>Laptop pc: Test application<a class="headerlink" href="#laptop-pc-test-application" title="Link to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>When the scene is ready press play having the vr connected and the Oculus app runnig. This should stream the environment in the app and this should enable the view of the pointcloud if the desktop demo is running.</p></li>
</ol>
</section>
</section>
<section id="finally-launch-evrything">
<h2>FINALLY LAUNCH EVRYTHING:<a class="headerlink" href="#finally-launch-evrything" title="Link to this heading">¬∂</a></h2>
<p>When everything works and evrything is properly connected do this:
1. Launch the desktop demo
2. Launch Unity App
3. Launch the haptic control node in a terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">launch</span> <span class="n">haptic_control</span> <span class="n">haptic_control</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span> <span class="n">haption_ws_path</span><span class="o">:=/</span><span class="n">home</span><span class="o">/</span><span class="n">robotics</span><span class="o">/</span><span class="n">haption_ws</span><span class="o">/</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>4. When the control starts remember to press the green button on the haptic interface to enable force feedback
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="00_index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Demos</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; The IDRA team - 2023
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Teleoperated Ultrasonography Setup and Demo Guide</a><ul>
<li><a class="reference internal" href="#required-hardware">Required Hardware</a><ul>
<li><a class="reference internal" href="#optional">Optional</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connections">Connections</a></li>
<li><a class="reference internal" href="#required-software-and-dependencies">Required Software and Dependencies</a></li>
<li><a class="reference internal" href="#instructions">Instructions</a><ul>
<li><a class="reference internal" href="#desktop-pc-robot-connection">Desktop pc - Robot connection</a></li>
<li><a class="reference internal" href="#desktop-pc-haptic-inteface">Desktop pc - Haptic inteface</a></li>
<li><a class="reference internal" href="#android-phone">Android phone</a></li>
<li><a class="reference internal" href="#desktop-pc-launch-the-demo">Desktop pc: Launch the demo</a></li>
<li><a class="reference internal" href="#desktop-pc-stream-the-topics-to-unity">Desktop pc: stream the topics to Unity</a></li>
<li><a class="reference internal" href="#laptop-pc">Laptop pc:</a></li>
<li><a class="reference internal" href="#vr-headset">VR Headset:</a></li>
<li><a class="reference internal" href="#laptop-pc-test-application">Laptop pc: Test application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#finally-launch-evrything">FINALLY LAUNCH EVRYTHING:</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>